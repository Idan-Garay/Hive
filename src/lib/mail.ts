"use server";
import nodemailer from "nodemailer";

export const sendEmailVerificationCode = async (
  email: string,
  code: string
) => {
  const transporter = nodemailer.createTransport({
    service: "gmail",
    host: "smtp.gmail.com",
    secure: false, // true for 465, false for other ports
    auth: {
      user: process.env.GMAIL_FROM,
      pass: process.env.GMAIL_APP_PASSWORD,
    },
  });
  try {
    return await transporter.sendMail({
      from: process.env.GMAIL_FROM, // sender address
      to: email, // list of receivers
      subject: `Hive Verification code`, // Subject line
      html: emailTemplate(email, code), // html body
    });
  } catch (err) {
    return null;
  }
};

const emailTemplate = (email: string, code: string) => {
  return `<!doctype html><html lang="en"><head><meta charset="UTF-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><title>Document</title></head><body></body></html><html><body><div class=""><div class="aHl"></div><div id=":24" tabindex="-1"></div><divid=":32"class="ii gt"jslog="20277; u014N:xr6bB; 1:WyIjdGhyZWFkLWY6MTc5OTI2MDk3MzIwNzA4ODczMCJd; 24:W251bGwsbnVsbCxudWxsLDI5XQ..; 4:WyIjbXNnLWY6MTc5OTI2MDk3MzIwNzA4ODczMCJd"><div id=":33" class="a3s aiL msg-5249069013511778448"><u></u><div style="background-color: #faf5ff"><divstyle="color: transparent;opacity: 0;font-size: 0;border: 0;max-height: 1px;width: 1px;margin: 0;padding: 0;border-width: 0 !important;display: none !important;line-height: 0 !important;"><imgborder="0"width="1"height="1"src="https://ci3.googleusercontent.com/meips/ADKq_Nb5eCageg_sojEmUEm_OmT_D0e68Yg79lVU29Yfa0_z4CzCd-d6fpP-xqEqWCQKXbHXGDkSd6Mu4OvNJwdhymqbMa1A5mmW4kU2IfSsTbDyR91akDafoePVEGaJ-fMhxqDev9AG2ObCq1ACC3FotEYiCQT_mePtCwEODjU4XjOJ3m1aPVwflwx9RvBPUUvhPbO7nwVmpyFh2K-_bwR4JwfUS9FI=s0-d-e1-ft#https://sp-t1.mmtrkr.com/q/WhE8mWalrKQPplGl8lC4Dg~~/AASgtwA~/RgRoKTZxPVcDc3BjQgpmRHGxRmbhSkpPUhtzaWRlcHJvamVjdC5oaXZlc0BnbWFpbC5jb21YBAAAAnY~"alt=""class="CToWUd"data-bit="iit"/></div><span style="display: none">Boost email engagement with Mailmodo</span><div style="background-color: #faf5ff"><divstyle="background: #fff;background-color: #fff;margin: 0 auto;max-width: 600px;"><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="background: #fff; background-color: #fff; width: 100%"><tbody><tr><tdstyle="direction: ltr;font-size: 0;padding: 0;padding-bottom: 0;padding-left: 0;padding-right: 0;padding-top: 0;text-align: center;"><divstyle="background: #fff;background-color: #fff;margin: 0 auto;max-width: 600px;"><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="background: #fff;background-color: #fff;width: 100%;"><tbody><tr><tdstyle="border: undefined solid undefined;direction: ltr;font-size: 0;padding: 20px 0;padding-bottom: 30px;padding-left: 20px;padding-right: 20px;padding-top: 20px;text-align: center;"><divclass="m_-5249069013511778448mj-column-per-100"style="font-size: 0;text-align: left;direction: ltr;display: inline-block;vertical-align: top;width: 100%;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"width="100%"><tbody><tr><tdstyle="background-color: transparent;border: 0 solid undefined;vertical-align: top;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"width="100%"><tbody><tr><tdalign="center"style="font-size: 0;padding: 0;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;word-break: break-word;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"style="border-collapse: collapse;border-spacing: 0;"><tbody><tr><tdstyle="width: 44px;background-color: #000;"><imgalt="Alternate image text"height="auto"src="/public/x-icon.svg"style="border: 0 solidtransparent;border-radius: 0;display: block;outline: 0;text-decoration: none;height: auto;width: 100%;font-size: 13px;"width="44"class="CToWUd"data-bit="iit"/></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div></td></tr></tbody></table></div><divstyle="background: #eb4747;background-color: #eb4747;margin: 0 auto;max-width: 600px;"><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="width: 100%"><tbody><tr><tdstyle="border: 0 solid #1e293b;direction: ltr;font-size: 0;padding: 20px 0;padding-bottom: 10px;padding-left: 10px;padding-right: 10px;padding-top: 10px;text-align: center;background-color: hsl(204 87.5% 52.9%);"><divclass="m_-5249069013511778448mj-column-per-100"style="font-size: 0;text-align: left;direction: ltr;display: inline-block;vertical-align: top;width: 100%;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"width="100%"><tbody><tr><tdstyle="background-color: transparent;border: 0 solid transparent;vertical-align: top;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"width="100%"><tbody><tr><tdalign="center"style="font-size: 0;padding: 0;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;word-break: break-word;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"style="border-collapse: collapse;border-spacing: 0;"><tbody><tr><tdstyle="width: 87px"><imgalt="Image"height="auto"src="https://ci3.googleusercontent.com/meips/ADKq_NYrfrByjc6bg9BOv09G8w_u9LPfaMc3zGt9P-IK9z0VLY_D2GWgomxkz1k3RSML-YAVkb8wfeDPHjCSadXMKBEdxf8AuodpqRVP88SWJV7qx8Y-7rlibi46ucYUqwAjKiDGS8P8No2HuvJfIzJRC3eGlY288WJylzFF0SFgd3QrVfzGMugzTg6ighZAVryMc11rLwGR8hCiIq316VSOV1-P1Wu4-mlSzoxW=s0-d-e1-ft#https://img.mmdocdn.com/mailmodo/image/upload/v1658131947/editor/p/2c28dec6-c21c-4385-a91f-96e9a90c404f/d837cca5ebd76fbe268015bd9fe51b07_fu78lk.png"style="border: 0 solid#1e293b;border-radius: 0;display: block;outline: 0;text-decoration: none;height: auto;width: 100%;font-size: 13px;"width="87"class="CToWUd"data-bit="iit"/></td></tr></tbody></table></td></tr></tbody></table></td></tr></tbody></table></div></td></tr></tbody></table></div><divstyle="background: #fff;background-color: #fff;margin: 0 auto;max-width: 600px;"><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="background: #fff;background-color: #fff;width: 100%;"><tbody><tr><tdstyle="border: 0 solid #1e293b;direction: ltr;font-size: 0;padding: 20px 0;padding-bottom: 40px;padding-left: 30px;padding-right: 30px;padding-top: 20px;text-align: center;"><divclass="m_-5249069013511778448mj-column-per-100"style="font-size: 0;text-align: left;direction: ltr;display: inline-block;vertical-align: top;width: 100%;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"style="background-color: transparent;border: 0 solid transparent;vertical-align: top;"width="100%"><tbody><tr><tdalign="left"style="font-size: 0;padding: 10px 25px;padding-top: 0;padding-right: 0;padding-bottom: 24px;padding-left: 0;word-break: break-word;"><divstyle="font-family: Helvetica;font-size: 16px;font-weight: 400;letter-spacing: 0;line-height: 1.5;text-align: left;color: #1e293b;"><p style="text-align: justify"><span style="font-size: 36px">Email verification</span></p><p style="text-align: justify">Â </p><p style="text-align: justify"><span style="font-size: 16px">Hi ${email},</span></p><p style="text-align: justify"><span style="font-size: 16px">You're almost set to start enjoying. Your verification code is:</span></p><p style="text-align: center"><strong>${code}</strong></p></div></td></tr></tbody></table></div></td></tr></tbody></table></div><divstyle="background: #fff;background-color: #fff;margin: 0 auto;max-width: 600px;"><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="background: #fff;background-color: #fff;width: 100%;"><tbody><tr><tdstyle="border: 0 solid #1e293b;direction: ltr;font-size: 0;padding: 20px 0;padding-bottom: 0;padding-left: 50px;padding-right: 50px;padding-top: 0;text-align: center;"><divclass="m_-5249069013511778448mj-column-per-100"style="font-size: 0;text-align: left;direction: ltr;display: inline-block;vertical-align: top;width: 100%;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"width="100%"><tbody><tr><tdstyle="background-color: transparent;border: 0 solid transparent;vertical-align: top;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 0;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"width="100%"><tbody><tr><tdstyle="font-size: 0;padding: 10px 25px;padding-top: 10px;padding-right: 0;padding-bottom: 10px;padding-left: 0;word-break: break-word;"><pstyle="border-top: solid 1pxhsl(204 87.5% 52.9%);font-size: 1px;margin: 0 auto;width: 100%;"></p></td></tr></tbody></table></td></tr></tbody></table></div></td></tr></tbody></table></div><divstyle="background: 0 0;background-color: transparent;margin: 0 auto;max-width: 600px;"><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="background: 0 0;background-color: transparent;width: 100%;"><tbody><tr><tdstyle="border: 0 solid #1e293b;direction: ltr;font-size: 0;padding: 20px 0;padding-bottom: 30px;padding-left: 20px;padding-right: 20px;padding-top: 20px;text-align: center;"><divclass="m_-5249069013511778448mj-column-per-100"style="font-size: 0;text-align: left;direction: ltr;display: inline-block;vertical-align: top;width: 100%;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"style="background-color: transparent;border: 0 solid transparent;vertical-align: top;"width="100%"><tbody><tr><tdalign="center"style="font-size: 0;padding: 10px 25px;padding-top: 12px;padding-right: 0;padding-bottom: 12px;padding-left: 0;word-break: break-word;"><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="float: none;display: inline-table;"><tbody><tr><tdstyle="padding: 0 5px 0 5px;vertical-align: middle;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"style="border-radius: 600px;width: 32px;"><tbody><tr><tdstyle="font-size: 0;height: 32px;vertical-align: middle;width: 32px;"><ahref="https://t.mmtrkr.com/clicks/html/f28870a9-ec3f-416c-aad7-d6dfdf6b1cb5/cfbfb8dc-aa14-4793-94ec-f937e467c940/af079bdc-4a6e-5b32-8374-68a691566b26"target="_blank"data-saferedirecturl="https://www.google.com/url?q=https://t.mmtrkr.com/clicks/html/f28870a9-ec3f-416c-aad7-d6dfdf6b1cb5/cfbfb8dc-aa14-4793-94ec-f937e467c940/af079bdc-4a6e-5b32-8374-68a691566b26&source=gmail&ust=1715995383234000&usg=AOvVaw2JpVyrmzKtm5D21LdHEUO4"><imgalt="Facebook"height="32"src="https://ci3.googleusercontent.com/meips/ADKq_Naa49G6ZDbXL0tScDLmlq2fYBeQNFpXfi1M40XsYM4Tx2UzFrBs0V0NLYYb8FPPksevgqYyYv-WR0M2Ov3zqdgQ8MsYGP8Y-4VcPiY7pvrIzUBJlT-cxPxRGMCnIiDP0WHknSuYZjjXOYGcsJWakyiCUdSGxqvWYd0=s0-d-e1-ft#https://img.mmdocdn.com/mailmodo/image/upload/v1631877970/editor/constants/EditorIcons/facebook.png"style="border-radius: 600px;display: block;"width="32"class="CToWUd"data-bit="iit"/></a></td></tr></tbody></table></td></tr></tbody></table><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="float: none;display: inline-table;"><tbody><tr><tdstyle="padding: 0 5px 0 5px;vertical-align: middle;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"style="border-radius: 600px;width: 32px;"><tbody><tr><tdstyle="font-size: 0;height: 32px;vertical-align: middle;width: 32px;"><ahref="https://t.mmtrkr.com/clicks/html/f28870a9-ec3f-416c-aad7-d6dfdf6b1cb5/cfbfb8dc-aa14-4793-94ec-f937e467c940/f0ea5a4e-c280-5043-a42b-03893c19d0f2"target="_blank"data-saferedirecturl="https://www.google.com/url?q=https://t.mmtrkr.com/clicks/html/f28870a9-ec3f-416c-aad7-d6dfdf6b1cb5/cfbfb8dc-aa14-4793-94ec-f937e467c940/f0ea5a4e-c280-5043-a42b-03893c19d0f2&source=gmail&ust=1715995383234000&usg=AOvVaw2JwkUWhtYJbS93YeaJVw_c"><imgalt="Linkedin"height="32"src="https://ci3.googleusercontent.com/meips/ADKq_NZz6lp6mQuGKs3RXV3XbqJeTYmGZBp7VmRUbcT-WdYqRC3QtblA5K1XujoeZgUfma6-MNqM7_OqjJLEHdeScPXmmhIHcSLuuDkh5q7CcmpMSEUqIBmtB4jw8CmTPLBAd42YFzOyr-j4amhmfKIOka0eLWmpE-0xK-M=s0-d-e1-ft#https://img.mmdocdn.com/mailmodo/image/upload/v1631877969/editor/constants/EditorIcons/Linkedin.png"style="border-radius: 600px;display: block;"width="32"class="CToWUd"data-bit="iit"/></a></td></tr></tbody></table></td></tr></tbody></table><tablealign="center"border="0"cellpadding="0"cellspacing="0"role="presentation"style="float: none;display: inline-table;"><tbody><tr><tdstyle="padding: 0 5px 0 5px;vertical-align: middle;"><tableborder="0"cellpadding="0"cellspacing="0"role="presentation"style="border-radius: 600px;width: 32px;"><tbody><tr><tdstyle="font-size: 0;height: 32px;vertical-align: middle;width: 32px;"><imgalt="Instagram"height="32"src="https://ci3.googleusercontent.com/meips/ADKq_NZ3mvOhsJ0qZ7wiK0tf6nfwJkconPFKmYeV3mGp7fb8oE39Eoi_9WQO-pls0qwNIaRGvDCLq8W3vKW74xbIjvIZVIi6FxZrXMDE2clTCyKBc3bBI3THDHQZA1cLGCcz5FGrE4-xC-N2-gXinkaJ_T6WrreVNYdX08HXmwauDiKJ5qaxn0vYbNYgULoSbZxHhb7zkDlZY7gsMkI-VVQOqfTDpe2FlAL0G8lH=s0-d-e1-ft#https://img.mmdocdn.com/mailmodo/image/upload/v1639159478/editor/p/31e7bae9-8e82-4d53-a3d6-532487e2ea1f/dce666bbba5337d041244e3820ade732_zikbug.png"style="border-radius: 600px;display: block;"width="32"class="CToWUd"data-bit="iit"/></td></tr></tbody></table></td></tr></tbody></table></td></tr><tr><tdalign="left"style="font-size: 0;padding: 10px 25px;padding-top: 0;padding-right: 0;padding-bottom: 0;padding-left: 5px;word-break: break-word;"><divstyle="font-family: Helvetica;font-size: 14px;font-weight: 400;letter-spacing: 0.4px;line-height: 1.4;text-align: left;color: #444;"><p style="text-align: center">Yati, Liloan, Cebu 6002, Philippines</p></div></td></tr><tr><tdstyle="background: 0 0;font-size: 0;word-break: break-word;"><div style="height: 24px">Â </div></td></tr></tbody></table></div></td></tr></tbody></table></div></td></tr></tbody></table></div></div><imgwidth="1"height="1"alt="signature"src="https://ci3.googleusercontent.com/meips/ADKq_NasDbG7DKj8X-B5VMB8dKAIu6H3VIum1_N1idXOoaFu-pse8kY04B4mx44aHyJZDDEMQqDgNjF9-IgZ6iywQBRwjWRUMuuJiHHzkKiyu4O8u_RQD370NvRr9ATmjjOipLkqte8D9FriD5nLW3K0iWpOuiH0I1ZvfO920HzTXls=s0-d-e1-ft#https://t.mmtrkr.com/opens/html/f28870a9-ec3f-416c-aad7-d6dfdf6b1cb5/cfbfb8dc-aa14-4793-94ec-f937e467c940"class="CToWUd"data-bit="iit"/><imgborder="0"width="1"height="1"alt=""src="https://ci3.googleusercontent.com/meips/ADKq_NaNhirBhcJ3_HSv1OiijzirbYaZZV3ODdXgdkLW7tI36DKiSrjS-4cBC2fUlE5RO1p-DVvvqevfet8H0jk-jnMV6vBFSS5MeivjFDG3CJT0tGRpox2z87N8t0pM_uCiiSbPPYjGEEfDpqwnaHNJ3vknGJwPwDt-AOK4yOFleZz_CzSUko5gJHPWUCnMiRhM-XX8lSdSiZYFPohejTqiJeW3n2Oj=s0-d-e1-ft#https://sp-t1.mmtrkr.com/q/dG-rXxwXkGSlMI3Ucx6IKA~~/AASgtwA~/RgRoKTZxPlcDc3BjQgpmRHGxRmbhSkpPUhtzaWRlcHJvamVjdC5oaXZlc0BnbWFpbC5jb21YBAAAAnY~"class="CToWUd"data-bit="iit"/><div class="yj6qo"></div><div class="adL"></div></div></div></div><div class="WhmR8e" data-hash="0"></div></div></body></html>`;
};
